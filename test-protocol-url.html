<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LobeChat åè®®URLæµ‹è¯•</title>
    <style>
        body { font-family: system-ui; margin: 40px; line-height: 1.6; }
        .test-link { 
            display: inline-block; 
            padding: 12px 24px; 
            background: #1677ff; 
            color: white; 
            text-decoration: none; 
            border-radius: 6px; 
            margin: 8px 0; 
        }
        .test-link:hover { background: #0958d9; }
        .url-box { 
            background: #f5f5f5; 
            padding: 12px; 
            border-radius: 4px; 
            word-break: break-all; 
            margin: 8px 0; 
            font-family: monospace; 
        }
        .section { margin: 32px 0; }
        .scheme-selector {
            margin: 16px 0;
        }
        .scheme-selector select {
            padding: 8px;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ LobeChat åè®®URLæµ‹è¯•</h1>
    
    <div class="section">
        <h2>åè®®ç‰ˆæœ¬é€‰æ‹©ï¼š</h2>
        <div class="scheme-selector">
            <label>é€‰æ‹©åè®®ç±»å‹ï¼š</label>
            <select id="schemeSelect">
                <option value="lobehub-dev">lobehub-dev:// (å¼€å‘ç¯å¢ƒ)</option>
                <option value="lobehub">lobehub:// (æ­£å¼ç‰ˆ)</option>
                <option value="lobehub-beta">lobehub-beta:// (Betaç‰ˆ)</option>
                <option value="lobehub-nightly">lobehub-nightly:// (Nightlyç‰ˆ)</option>
            </select>
            <button onclick="updateUrls()">æ›´æ–°URL</button>
        </div>
    </div>
    
    <div class="section">
        <h2>æµ‹è¯•æ­¥éª¤ï¼š</h2>
        <ol>
            <li>é€‰æ‹©æ­£ç¡®çš„åè®®ç±»å‹ï¼ˆå¼€å‘ç¯å¢ƒé€‰æ‹© lobehub-devï¼‰</li>
            <li>ç¡®ä¿å¯¹åº”çš„ LobeChat åº”ç”¨æ­£åœ¨è¿è¡Œ</li>
            <li>ç‚¹å‡»ä¸‹é¢çš„æµ‹è¯•é“¾æ¥</li>
            <li>ç³»ç»Ÿåº”è¯¥ä¼šå”¤èµ·å¯¹åº”çš„ LobeChat åº”ç”¨</li>
            <li>åº”ç”¨å†…åº”è¯¥ä¼šæ˜¾ç¤ºæ’ä»¶å®‰è£…ç¡®è®¤å¯¹è¯æ¡†</li>
        </ol>
    </div>

    <div class="section">
        <h2>ğŸ“‹ æµ‹è¯•ç”¨ä¾‹</h2>
        
        <h3>1. stdio ç±»å‹æ’ä»¶ (EdgeOne MCP)</h3>
        <div class="url-box" id="stdio-url"></div>
        <a href="#" class="test-link" id="stdio-link">ğŸ“¦ æµ‹è¯•å®‰è£… EdgeOne MCP (stdio)</a>
        
        <h3>2. http ç±»å‹æ’ä»¶ (Awesome API)</h3>
        <div class="url-box" id="http-url"></div>
        <a href="#" class="test-link" id="http-link">ğŸŒ æµ‹è¯•å®‰è£… Awesome API (http)</a>
        
        <h3>3. åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ’ä»¶</h3>
        <div class="url-box" id="special-url"></div>
        <a href="#" class="test-link" id="special-link">âœ¨ æµ‹è¯•ç‰¹æ®Šå­—ç¬¦æ’ä»¶</a>
    </div>

    <div class="section">
        <h2>ğŸ”§ æ‰‹åŠ¨æµ‹è¯•</h2>
        <p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶URLåˆ°åœ°å€æ æˆ–å‘½ä»¤è¡Œæµ‹è¯•ï¼š</p>
        <h4>macOS å‘½ä»¤è¡Œæµ‹è¯•:</h4>
        <div class="url-box" id="mac-cmd"></div>
        <h4>Windows å‘½ä»¤è¡Œæµ‹è¯•:</h4>
        <div class="url-box" id="win-cmd"></div>
    </div>

    <script>
        // ç”Ÿæˆæµ‹è¯•åè®®URLçš„å‡½æ•°
        function generateRFCProtocolUrl(params) {
            const { id, schema, marketId, metaParams = {}, scheme = 'lobehub-dev' } = params;
            
            const baseUrl = `${scheme}://plugin/install`;
            const searchParams = new URLSearchParams();
            
            searchParams.set('type', 'mcp');
            searchParams.set('id', id);
            
            const schemaJson = JSON.stringify(schema);
            searchParams.set('schema', schemaJson);
            
            if (marketId) {
                searchParams.set('marketId', marketId);
            }
            
            for (const [key, value] of Object.entries(metaParams)) {
                if (!key.startsWith('meta_')) {
                    searchParams.set(`meta_${key}`, value);
                } else {
                    searchParams.set(key, value);
                }
            }
            
            return `${baseUrl}?${searchParams.toString()}`;
        }

        // æµ‹è¯•ç”¨ä¾‹ 1: stdio ç±»å‹
        const stdioSchema = {
            identifier: 'edgeone-mcp-test',
            name: 'EdgeOne MCP Test',
            author: 'Higress Team',
            description: 'EdgeOne API integration for LobeChat (æµ‹è¯•ç‰ˆ)',
            version: '1.0.0',
            homepage: 'https://github.com/higress/edgeone-mcp',
            config: {
                type: 'stdio',
                command: 'npx',
                args: ['-y', '@higress/edgeone-mcp'],
                env: { NODE_ENV: 'production' }
            }
        };

        // æµ‹è¯•ç”¨ä¾‹ 2: http ç±»å‹
        const httpSchema = {
            identifier: 'awesome-api-test',
            name: 'Awesome API Test',
            author: 'Smithery',
            description: 'Awesome API integration (æµ‹è¯•ç‰ˆ)',
            version: '2.0.0',
            config: {
                type: 'http',
                url: 'https://api.smithery.ai/v1/mcp',
                headers: {
                    'Authorization': 'Bearer test-token',
                    'X-Custom-Header': 'test-value'
                }
            }
        };

        // æµ‹è¯•ç”¨ä¾‹ 3: ç‰¹æ®Šå­—ç¬¦
        const specialSchema = {
            identifier: 'special-chars-test',
            name: 'ç‰¹æ®Šå­—ç¬¦æ’ä»¶ Ã± ğŸš€',
            author: 'Test <test@example.com>',
            description: 'Description with "quotes" and \'apostrophes\' (æµ‹è¯•)',
            version: '1.0.0',
            config: {
                type: 'stdio',
                command: 'node',
                args: ['test script.js', 'arg/with/slashes']
            }
        };

        function updateUrls() {
            const scheme = document.getElementById('schemeSelect').value;
            
            const stdioUrl = generateRFCProtocolUrl({
                id: 'edgeone-mcp-test',
                schema: stdioSchema,
                marketId: 'higress',
                metaParams: {
                    author: 'Higress Team',
                    category: 'api-integration'
                },
                scheme
            });

            const httpUrl = generateRFCProtocolUrl({
                id: 'awesome-api-test',
                schema: httpSchema,
                marketId: 'smithery',
                scheme
            });

            const specialUrl = generateRFCProtocolUrl({
                id: 'special-chars-test',
                schema: specialSchema,
                metaParams: {
                    emoji: 'ğŸ‰',
                    chinese: 'ä¸­æ–‡æµ‹è¯•'
                },
                scheme
            });

            // è®¾ç½®URLå’Œé“¾æ¥
            document.getElementById('stdio-url').textContent = stdioUrl;
            document.getElementById('stdio-link').href = stdioUrl;
            
            document.getElementById('http-url').textContent = httpUrl;
            document.getElementById('http-link').href = httpUrl;
            
            document.getElementById('special-url').textContent = specialUrl;
            document.getElementById('special-link').href = specialUrl;

            // è®¾ç½®å‘½ä»¤è¡Œç¤ºä¾‹
            document.getElementById('mac-cmd').textContent = `open "${stdioUrl}"`;
            document.getElementById('win-cmd').textContent = `start "${stdioUrl}"`;

            console.log('ğŸ§ª æµ‹è¯•URLå·²æ›´æ–° (scheme:', scheme + '):');
            console.log('stdio:', stdioUrl);
            console.log('http:', httpUrl);
            console.log('special:', specialUrl);
        }

        // é¡µé¢åŠ è½½æ—¶é»˜è®¤ä½¿ç”¨å¼€å‘ç¯å¢ƒåè®®
        document.addEventListener('DOMContentLoaded', function() {
            updateUrls();
        });

        // æ·»åŠ ç‚¹å‡»äº‹ä»¶æ—¥å¿—
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('test-link')) {
                console.log('ç‚¹å‡»åè®®é“¾æ¥:', e.target.href);
                // ä¸é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œè®©ç³»ç»Ÿå¤„ç†åè®®é“¾æ¥
            }
        });
    </script>
</body>
</html> 